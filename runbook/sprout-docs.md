# Sprout Docs Runbook

Generate navigable documentation for every folder in a repository. Output goes to a gitignored `sprout-docs/` folder for local exploration.

## Overview

Sprout Docs creates folder-scoped documentation with breadcrumb navigation and contents tables. Docs are ephemeral (gitignored) - useful for exploring unfamiliar codebases without polluting the repo.

## First Run Setup

1. Create `sprout-docs/` folder
2. Add to `.gitignore`:
   ```gitignore
   # Sprout docs (local exploration only)
   sprout-docs/
   ```
3. Commit the `.gitignore` change
4. Proceed with folder discovery and documentation

## Output Structure

```
my-repo/
├── src/
│   ├── components/
│   └── utils/
├── sprout-docs/           # Gitignored
│   ├── .state.json        # Progress tracking
│   ├── index.md           # Root overview
│   ├── src.md             # Documents src/
│   └── src/
│       ├── components.md
│       └── utils.md
└── .gitignore
```

## State File

`sprout-docs/.state.json` tracks documentation state:

```json
{
  "version": 1,
  "lastRun": "2026-01-07T00:00:00Z",
  "folders": {
    "src": { "contentHash": "abc123", "documented": true },
    "src/components": { "contentHash": "def456", "documented": true }
  },
  "stats": {
    "totalFolders": 23,
    "documented": 23
  }
}
```

## Skip Patterns

Always skip:
- `node_modules/`, `.git/`, `dist/`, `build/`, `out/`
- `coverage/`, `.claude/`, `__pycache__/`, `sprout-docs/`
- Anything in `.gitignore`
- Empty directories

## Folder Discovery

For each folder:
1. Calculate content hash: `git rev-parse HEAD:path/to/folder`
2. Compare to stored hash in `.state.json`
3. If new or changed, add to processing queue

## Doc Template

```markdown
# folder-name

[← parent](../parent.md) · [index](../index.md)

> One-line purpose: why this folder exists, not what it contains.

## Contents

| Item | Purpose |
|------|---------|
| `file.ts` | Brief description |
| `subfolder/` | Brief description → [docs](./subfolder.md) |

## Relationships

Non-obvious connections only:
- **Consumed by**: `../api/routes.ts` uses these utilities
- **Depends on**: Requires `../config/` to be initialized first

---
*Generated by sprout-docs · Updated: YYYY-MM-DD*
```

## Navigation Rules

- Link to parent doc (except root index)
- Link to index from all docs
- Use relative paths only
- Link to subfolder docs inline in contents table

## Quality Gate

Doc is complete when:
- [ ] Has navigation links (parent, index)
- [ ] Has purpose statement (< 100 chars, explains WHY)
- [ ] Contents table matches actual folder contents
- [ ] All internal links resolve
- [ ] Updated timestamp present

## Iteration Strategy

Each iteration:
1. Check state - Read `.state.json`, identify pending work
2. Select batch - Pick 5-10 folders to document
3. Complete batch - Finish every doc before continuing
4. Update state - Write to `.state.json`
5. Report progress

**Critical: Always finish what you start**
- Never leave a doc half-written
- State file reflects completed work only

## Update Mode

When `.state.json` exists:
1. Compare folder hashes to find changes
2. Only regenerate changed folders
3. Update timestamps on touched files

## Cleanup

When done exploring, simply delete:
```bash
rm -rf sprout-docs/
```

The `.gitignore` entry can stay for future use.

## Why Ephemeral?

| Benefit | Explanation |
|---------|-------------|
| No merge conflicts | Docs never committed, can't conflict |
| Always fresh | Regenerate anytime with `/sprout-docs` |
| Zero maintenance | No need to keep docs in sync |
| Exploration focused | Generate when needed, delete when done |
